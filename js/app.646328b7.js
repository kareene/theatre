(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},a={app:0},r=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/theatre/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("theatre-app")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"theatre-app"},[n("p",[e._v("Select either of the available seats in the seating plan.")]),n("section",{staticClass:"theatre"},[e._m(0),n("seat-list",{attrs:{seats:e.seats,selectedSeatIds:e.selectedSeatIds},on:{selected:e.selectSeats}})],1),n("seat-legend"),e.seatsToConfirm.length?n("confirmation-modal",{attrs:{seatsToConfirm:e.seatsToConfirm},on:{close:e.closeModal}}):e._e()],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen"},[n("p",[e._v("Screen is this way")])])}],c=(n("99af"),n("4160"),n("d81d"),n("159b"),n("2909")),l=(n("7db0"),n("0481"),n("45fc"),n("4069"),[[0,0,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0],[0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0],[0,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2],[0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2],[2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3]]),u={1:25,2:20,3:15},d=h();function f(){return JSON.parse(JSON.stringify(d))}function p(){return d=g(),f()}function m(e,t){e.forEach((function(e){var n=d.find((function(t){return t&&t.id===e}));n.status=t})),_(d)}var v={getSeats:f,loadSeats:p,setSeatsStatus:m};function h(){var e=g();if(!e){var t=0;e=l.map((function(e){e.some((function(e){return e}))&&t++;var n=0;return e.map((function(e){return e?(n++,S(t,n,u[e])):null}))})).flat(),_(e)}return e}function S(e,t,n){return{id:"Row".concat(e,"-Seat").concat(t),price:n,status:"available"}}function g(){return JSON.parse(localStorage.getItem("theatre-seats"))}function _(e){localStorage.setItem("theatre-seats",JSON.stringify(e))}var b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("drag-select-container",{staticClass:"seat-list",attrs:{selectorClass:"available",color:"rgb(255, 0, 0, 0.2)"},on:{change:e.dragSelectHandler},nativeOn:{mouseup:function(t){return e.selectSeats(t)}}},e._l(e.seats,(function(t,s){return n("single-seat",{key:t?t.id:"noSeat"+s,class:e.dragSelectActiveClass(t),attrs:{seat:t,isSelected:e.isSeatSelected(t)},on:{selected:function(t){return e.$emit("selected",t)}}})})),1)},y=[],C=n("9556"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.seat?n("article",{staticClass:"single-seat",class:{available:"available"===e.seat.status,reserved:"reserved"===e.seat.status,selected:e.isSelected},on:{click:function(t){return t.stopPropagation(),e.$emit("selected",[e.seat])}}}):n("div")},T=[],j={name:"singleSeat",props:{seat:Object,isSelected:Boolean}},w=j,$=n("2877"),E=Object($["a"])(w,O,T,!1,null,null,null),P=E.exports,k={name:"seatList",props:{seats:Array,selectedSeatIds:Array},data:function(){return{dragSelectedSeats:[]}},methods:{isSeatSelected:function(e){return!!e&&!!this.selectedSeatIds.find((function(t){return t===e.id}))},dragSelectActiveClass:function(e){var t=!!e&&!!this.dragSelectedSeats.find((function(t){return t.id===e.id}));return t?"active":""},dragSelectHandler:function(e){this.dragSelectedSeats=e.map((function(e){return e._props.seat}))},selectSeats:function(){this.dragSelectedSeats.length&&(this.$emit("selected",this.dragSelectedSeats),this.dragSelectedSeats=[])}},components:{"drag-select-container":C["a"],singleSeat:P}},x=k,A=Object($["a"])(x,b,y,!1,null,null,null),I=A.exports,L=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},H=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"seat-legend"},[n("section",[n("div",{staticClass:"available"}),n("p",[e._v("Available seat")])]),n("section",[n("div",{staticClass:"reserved"}),n("p",[e._v("Reserved seat")])]),n("section",[n("div",{staticClass:"selected"}),n("p",[e._v("Selected seat")])])])}],M={name:"seatLegend"},J=M,U=Object($["a"])(J,L,H,!1,null,null,null),N=U.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"confirmation-modal",on:{click:function(t){return e.$emit("close",!1)}}},[n("article",{staticClass:"modal",on:{click:function(e){e.stopPropagation()}}},[n("p",[e._v("You have selected the following seat"),e.multipleSeats?n("span",[e._v("s")]):e._e(),e._v(":")]),n("div",{staticClass:"selected-seats"},e._l(e.seatsToConfirm,(function(t){return n("p",{key:t.id,staticClass:"seat-info"},[e._v(" "+e._s(t.id)+" "),n("span",[e._v(e._s(e._f("formatPrice")(t.price)))])])})),0),e.multipleSeats?n("p",{staticClass:"seat-info"},[e._v("Total: "),n("span",[e._v(e._s(e._f("formatPrice")(e.total)))])]):e._e(),n("p",[e._v("Please confirm your selection")]),n("button",{staticClass:"primary-button",on:{click:function(t){return t.stopPropagation(),e.$emit("close",!0)}}},[e._v(" Confirm ")]),n("button",{staticClass:"secondary-button",on:{click:function(t){return t.stopPropagation(),e.$emit("close",!1)}}},[e._v(" Cancel ")])])])},R=[],B=(n("13d5"),{name:"confirmation-modal",props:{seatsToConfirm:Array},created:function(){document.addEventListener("keyup",this.escapeKeyHandler)},destroyed:function(){document.removeEventListener("keyup",this.escapeKeyHandler)},filters:{formatPrice:function(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}},computed:{multipleSeats:function(){return this.seatsToConfirm.length>1},total:function(){return this.seatsToConfirm.reduce((function(e,t){return e+t.price}),0)}},methods:{escapeKeyHandler:function(e){27===e.keyCode&&this.$emit("close",!1)}}}),D=B,Y=Object($["a"])(D,K,R,!1,null,null,null),q=Y.exports,z={name:"theatreApp",data:function(){return{seats:[],selectedSeatIds:[],seatsToConfirm:[],timeout:null}},created:function(){this.seats=v.getSeats(),window.addEventListener("storage",this.storageUpdateHandler)},destroyed:function(){window.removeEventListener("storage",this.storageUpdateHandler)},methods:{selectSeats:function(e){e.forEach((function(e){e.status="reserved"})),v.setSeatsStatus(e.map((function(e){return e.id})),"reserved"),this.seatsToConfirm=e,this.timeout=setTimeout(this.closeModal,1e4,!1)},closeModal:function(e){this.timeout&&(this.timeout=clearTimeout(this.timeout)),e?this.selectedSeatIds=[].concat(Object(c["a"])(this.selectedSeatIds),Object(c["a"])(this.seatsToConfirm.map((function(e){return e.id})))):(this.seatsToConfirm.forEach((function(e){e.status="available"})),v.setSeatsStatus(this.seatsToConfirm.map((function(e){return e.id})),"available")),this.seatsToConfirm=[]},storageUpdateHandler:function(e){"theatre-seats"===e.key&&(this.seats=v.loadSeats())}},components:{seatList:I,seatLegend:N,confirmationModal:q}},F=z,G=Object($["a"])(F,i,o,!1,null,null,null),Q=G.exports,V={name:"App",components:{theatreApp:Q}},W=V,X=Object($["a"])(W,a,r,!1,null,null,null),Z=X.exports;n("b7e3");s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(Z)}}).$mount("#app")},b7e3:function(e,t,n){}});
//# sourceMappingURL=app.646328b7.js.map